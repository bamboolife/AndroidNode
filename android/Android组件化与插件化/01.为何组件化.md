## 一、单一工程开发模式遇到哪些痛点
为了便于区分，在这里我将开发模式分为2种：一种是项目组件化开发，一种是单一工程开发模式。

- 单一工程开发模式

顾名思义，就是一个代码工程(Project)对应一个APP了，这个APP的所有业务功能都是集中在同一个工程里实现的。

- 组件化开发

简单来说，就是将一个APP的业务功能进行拆分，每一个功能都是一个单独的工程，每个工程都能独立运行，且只包含自己的业务，我们姑且叫这个独立的功能为一个组件服务，最后整个APP由多个拆分出的
组件集成而成。

已经有很多文章对什么是组件化有更详细的介绍了，我这里就不赘述了。在讲组件化开发的好处之前，我先以我的亲身经历来讲讲单一工程开发模式的痛点有哪些。

1. 对工程的任意修改调试都要编译整个工程，效率十分低下；

做APP开发时，我们需要经常在手机或模拟器上进行调试，而每次调试都需要对整个工程进行编译，然后安装在手机上运行。即便你只是改了一句代码，或是UI调整了一个像素点，同样需要完整的编译工程。当工程代码越来越多时，编译也会越来越慢，你可以想象一下我修改了某句代码，编译一下需要等待4、5分钟才能成功运行的场景么，那简直让人崩溃，严重影响了开发效率（想起曾经用eclipse开发Android时，各种转菊花，卡顿得让人想死的心都有）。

2. 不利于多人团队协同开发；

早期一个APP可能就1、2个人来开发，但是随着业务的扩张，我们可能会发展到一个团队来开发一个APP，少则4、5个人，多则10几个人甚至更多。像手机淘宝、微信、支付宝这些巨无霸APP，他们的APP开发人员估计起码有数百个。
以10人团队为例，如果10个人都是基于同一个工程的代码拉分支进行开发，每人的开发任务虽然不同，但是都能修改整个工程的任意地方。为了适应自己的需求，团队内某人改了某句代码，但是这个改动又有可能影响别人的开发，这样开发人员之间势必要花更多的时间去沟通和协调，没法专注自己的功能点。最后进行10个人的代码合并时，有过这方面经历的人，就知道这是一件多么痛苦的事情，解决冲突解决得你要怀疑人生。

3. 无法做到功能复用

我曾经做过一个项目，每个开通这个业务的城市，都要做一个单独的APP，初期我们只开通了3、4个城市，需要同时发布3、4个APP，这些APP大概6、70%功能是相同的，但是都需要加入地方定制功能。如果你每个APP都采用单一工程模式开发，刚开始你可能每个工程都有同样的代码存在，只需要复制拷贝一下就行，但是如果有需求要对这些进行修改时，你必须得每个工程都逐一修改一遍，然后每个APP都测试一遍，工作量直接翻了数倍。

4. 业务模块间耦合严重

采用单一工程模式开发项目，到最后势必会造成业务模块高度耦合，可以说是你中有我、我中有你，修改任何业务都有可能导致牵一发而动全身，这显然是不利于后期项目功能维护以及迭代开发的。
## 二、为什么要进行组件化开发
前面都是我在单一工程开发模式下碰到的问题，已经严重影响了我们团队的开发效率以及质量，所以我才极力推崇组件化开发方式。它解决了我上面的所有痛点：

1. 极大提高工程编译速度

进行组件化拆分后，每个业务或者功能都是一个单独的工程，这个单独的工程可以独立编译运行，拆分后的工程通常都比较小，代码量也比较少，我再也不用像以前编译一下得等待好几分钟了。

2. 业务模块解耦，有利于多人团队协作开发

业务组件之间不能相互引用，每个组件都把对应的业务功能收敛在一个工程里，彼此互不打扰。 在多人团队里，每个人只负责自己的业务模块，他对业务功能的增删改查，都只限定在自己的这个业务模块里，不会影响其他人的业务，他代码质量的好坏也只会影响到自己的业务模块；对测试来说，也十分方便，大部分情况下，我们只需要着重测试修改过的业务组件即可，而不用老是进行全部回归测试。

3. 组件化是功能重用的基石

业务组件类似一个个积木一样，我们可以用积木搭建出不同的房子，同理我们也可以创建多个不同的APP。我们只需要维护好每个组件，需要用到该组件的功能时，一建引用集成就可以了。

当然，组件化并不是说只有好处没有坏处，例如：

- 组件化开发前期可能要花费更多的时间来进行模块拆分；
- 一个人的小项目完全没必要组件化开发，那样只会给自己带来更多的工作量；
- 组件化可能会带来更多重复的代码；
- 组件化需要良好的架构设计，包括怎么拆分业务，组件之间怎么通信等等，需要有个高水平的架构师统筹全局，经验不足的同学盲目进行组件化反而会适得其反，带来更多的麻烦；

## 三、小结
本文描述了单一工程开发与组件化开发的优缺点，这些都是在实际工作过程中的一些感悟。需要注意的是，我们并不要为了组件化而组件化，我们要根据实际情况来决定。如果组件化带来的好处远大于单一工程开发，那你就大胆使用组件化开发方案吧。













